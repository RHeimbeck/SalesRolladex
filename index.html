<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
        <link rel="stylesheet" href="css/main.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
        <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
        <script type="text/javascript" src="js/Chart.min.js"></script>
        <script type="text/javascript" src="js/main.js"></script>
        <script type="text/javascript">
            function replaceImage(ctx){
                if(ctx.src.indexOf('user.avatar') < 0){
                    ctx.outerHTML = '<div class="avatarRep">' + ctx.alt + '</div>';
                }

                return true;
            }
        </script>
    </head>

    <body ng-app="myApp" ng-controller="UserController as userCtrlr">
        <div class="container">
            <div class="col-xs-12 col-sm-6 col-md-4" ng-repeat="user in userCtrlr.users">
                <div class="list-group-item">
                    <div class="row">
                        <div class="avatar">
                            <img src="{{user.avatar}}" class="img-circle" alt="{{user.intl}}" onerror="replaceImage(this); "/>
                        </div>
                        <div class="nameTitle">
                            <div class="userName">{{user.name}}</div>
                            <div class="jobTitle">{{user.occupation}}</div>
                        </div>
                    </div>
                    <div class="row">
                        <canvas draw-chart="{{user.idx}}" class="conversionChart"></canvas>
                        <div class="stats">
                            <table>
                                <tr><td class="impressions">{{user.impressions | number}}</td></tr>
                                <tr><td class="impressionLabel">impressions</td></tr>
                                <tr><td class="conversions">{{user.conversions | number}}</td></tr>
                                <tr><td class="conversionLabel">conversion</td></tr>
                                <tr><td class="total">{{user.totalRevenue | currency:"$":0}}</td></tr>
                            </table>
                        </div>
                        <div class="convLabel">Conversions 4/12 - 4/30</div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>